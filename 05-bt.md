_La licence utilisées pour tous les articles MoBlo est_ [_CC BY-NC-ND 4.0_](https://creativecommons.org/licenses/by-nc-nd/4.0/)

[**Revenir à l'Introduction**](/README.md)

[**Revenir au diagramme Unit Definition**](/04-ud.md)

# 5.    Business Transactions \(BT\), les "Transactions Métier"

Les parties précédentes donnait une approche en lien avec l'architecture. Elles donnent les moyens de déterminer la population, l'architecture logicielle et l'architecture des données. Cette partie offre un point de vue plus en lien avec le Métier.

Cette partie présente les transactions qui ont un sens au niveau de la BlockChain. En considérant que la partie technique de la transaction est valide, une transaction peut porter des données dans la BlockChain qui peuvent être utilisées dans des cas non monétaires, donc le jeu de transactions doit être cohérent.

## 5.1.    Modélisation

Chaque transaction possède une origine et une destination. Chaque transaction porte plus ou moins de données.

![](/Img/BT-SimpleTransaction.png)

_**Figure 5-1 - BT - Transaction Simple**_

Dans la transaction représentée, Alice envoie à Boob des unités de l'_Asset Aj_ avec un complément de données _dk_ en utilisant la transaction _ti_.

![](/Img/BT-MultiSig.png)

_**Figure 5-2 - BT - Transaction MultiSignée**_

Dans le cas d'une transaction depuis une adresse MultiSignée, l'origine de la transaction peut être indiqué explicitement. Dans la figure qui précède, Alice et Bob envoient à Carol, 10 unités de _A5_ et 6 unités de _A12_ en utilisant la transaction _tz_.

L'identification des transactions prend son importance quand un sens tient dans une successions de transactions, le flux de transactions peut être ainsi identifié. On n'écrit plus _tz_, mais _t1_, _t2_, _t3_, ...

## 5.2.    Le diagramme BT pour le use case Bibliothèque

La use case Bibliothèque présente un grand nombre de transactions possibles.

![](/Img/BT-Library-SignUp.png)

_**Figure 5-3 - BT - Bibliothèque - Inscription**_

Les _Lecteurs_ utilisent une un portail Web pour accéder au système d'information. Ainsi, quand un nouveau _Lecteur_ souhaite s'enregistrer, il peut utiliser le portail Web. Dans la figure qui précède, la flèche est en pointillés pour indiquer qu'il ne s'agit pas d'une transaction de la BlockChain mais d'une action extérieure. La modélisation de telles transaction peut être utile pour décrire complètement le use case et rappeler l'importance du portail Web.

![](/Img/BT-Library-Distrib.png)

_**Figure 5-4 - BT - Bibliothèque - Distribution**_

La _Bibliothèque Centrale \(CL\)_ crée des _Assets_ et les unités d'_Asset_. Quand, dans la vraie vie, un livre est envoyé dans une _Bibliothèque \(L\)_, la _Bibliothèque Central \(CL\)_ doit envoyer l'unité d'_Asset_ à la _Bibliothèque \(L\)_.

![](/Img/BT-Library-Central.png)

_**Figure 5-5 - BT - Bibliothèque - Centralisation**_

Les livres peuvent être rendus dans n'importe quelle _Bibliothèque_. Ainsi une _Bibliothèque_ peut stocker, à un moment donné, plusieurs copies d'un même livre. Les livres doivent donc être envoyé à la _Bibliothèque Centrale_.

La réservation d'un livre particulier peut aussi être la raison d'un tel envoi, par exemple si un livre n'est disponible qu'en un seul exemplaire. Si quelqu'un souhaite le lire, alors le livre doit être transférer d'une _Bibliothèque_ à une autre en passant par la _Bibliothèque Centrale_.

Books can be returned in any library. Then a library can stored many copies of the same book. The books have to be sent to the _Central Library_.

Quoiqu'il en soit, la BlockChain indique où est situé le livre disponible.

La transaction précédente est similaire à la centralisation, sauf que, dans ce cas-ci, le livre est envoyé de la _Bibliothèque \(L\)_ à la _Bibliothèque Centrale \(CL\)_.

![](/Img/BT-Library-Loaning.png)

_**Figure 5-6 - BT - Bibliothèque - Emprunt**_

Un _Lecteur_ \(R\) peut emprunter un livre. Le livre est alors pris de la _Bibliothèque_ \(_Bibliothèque Centrale CL_ ou une autre _Bibliothèque L_\) et envoyé au _Lecteur_. La transaction peut porter des informations comme la date de fin de l'emprunt.

![](/Img/BT-Library-Return.png)

_**Figure 5-7 - BT - Bibliothèque - Retour**_

The simple cycle of book can be ended with the case of the return. A _Reader_ returns a book, and the unit is sent back to the _Library_.

At this point, the system is a ledger which allows to know where a book is located.

![](/Img/BT-Library-Booking.png)

_**Figure 5-8 - BT - Bibliothèque - Booking**_

Here is a sequential use case, where transactions have a related number to indicate the order which has to be followed.

The _Booking_ allows the _Readers_ to ask for a specific book in a specific library. Remind that _Readers_ can only use the Web Gate and only the Central Library can create _Assets_ and _Asset_ units.

The _Reader \(R\)_ asks for a book using the Web Gate. One unit of the _Asset Booking \(K\)_ is sent from the _Central Library_ to the destination _Library \(L\)_ asked by the _Reader_. The transaction carries on information about the _Booking_ \(book reference, destination library …\)

Now the system knows that the book is waited in a particular _Library_. The first case is “The book is already in the library”, and then there is nothing to do. The second case is “The book is only available in another library” and then batches take care to return the book to _Central Library_ and then distribute it to the destination _Library_.

When the book is available in the destination library, this _Library_ sends the unit of _Booking_ to the _Reader_ to notify him that the book is waiting for him in the _Library_. At the end, when the Reader comes to loan the book, the unit of _Booking_ is returned to _Central Library_.

Notice that the first step of _Booking_ is done after using Web Gate. A business part has to be implemented. In this part, a rule can specify how many _Bookings_ can be done by the same _Reader_ at the same time. But, this rule doesn’t appear in this BlockChain modelization.

![](/Img/BT-Library-Delay.png)

_**Figure 5-9 - BT - Bibliothèque - Delay**_

The last part of the use case is the _Delay_ in book return. Transactions are created by the batches which are using the _Central Library_ address based on loaning information. When a book is loaned, the end date is specified, the system easily allows to find Books loaned by _Readers_ out of End Date.

In this case, one unit of _Delay_ is sent to the _Reader \(R\)_ from the _Central Library \(CL\)_ with a reference on the book out of date.

When the _Reader_ returns the book, he sends to the _Library_ the unit of _Book_ and the unit of _Delay_.

## 5.3.    Forum use case BT

Forum is a simplest use case limited to two cases: open a new subject and comment an existing subject.

![](/Img/BT-Forum-NewSubj.png)

_**Figure 5-10 - BT - Forum - New Subject**_

The creation of a new subject is defined by the creation of a new _Asset_. It can be done by the _Forum Creator \(FC\)_ or an _Editor \(E\)_. When a new subject is opened, the _Publisher_ creates a new _Asset \(Sni\)_ and sends one unit of the _Asset_ to the _Publication Wall_. The transaction carries on the publication which can be read anyone able to connect to the BlockChain.

![](/Img/BT-Forum-Comment.png)

_**Figure 5-11 - BT - Forum - Comment**_

The _Creator_ of an _Asset_ is the owner of this _Asset_. He is then the only one able to create new units of the _Asset_.

In the Forum use case, the interest is to track Subjects and comments on the Subjects. For that, the same _Assets_ are used to create the subject and comment it. To comment a publication, people need to ask one unit of the _Asset_ to the _Creator_ of the publication.

_Someone \(P\)_ who wants to comment create a transaction only with data. The data indicates what is the Subject to be commented is and what is the transaction to be commented. The transaction is sent to the address of the _Creator of the Subject \(FC/E\)_.

If the _Creator_ of the _Subject_ decides to allow the comment, then he sends to _\(P\)_ one unit of the _Asset_ referencing the transaction used to ask this unit.

At the end, _\(P\)_ can send his comment to the _Publication Wall_ using the unit of _Asset_, referencing the transaction to comment and giving his comment.

[**Go to Conclusion**](/06-conclusion.md)

